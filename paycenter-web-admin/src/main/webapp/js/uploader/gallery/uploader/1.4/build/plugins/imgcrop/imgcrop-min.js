KISSY.add("gallery/uploader/1.4/plugins/imgcrop/imgcrop",function(e,f,g,h){function d(b){d.superclass.constructor.call(this,b);this.set("config",b)}var i=f.all;e.extend(d,g,{pluginInitializer:function(b){if(!b)return!1;var a=this,c=a.get("config"),c=new h(c);a.set("crop",c);b.on("success",a._successHandler,a);b.on("select",a._selectHandler,a);c.on("imgload",function(){a.set("isRender",!0)})},_successHandler:function(b){var a=this.get("crop"),c=b.file.id;a.set("url",b.result.url);b=".J_CropArea_"+
c;c=i(b);if(!c.length)return!1;a.set("areaEl",b);a.container=c;a.set("areaWidth",c.width());a.set("areaHeight",c.height());a.render()},_selectHandler:function(){var b=this.get("isRender"),a=this.get("crop");if(!b)return!1;a.destroy()}},{ATTRS:{pluginId:{value:"imgcrop"},isRender:{value:!1},config:{value:{}}}});return d},{requires:["node","base","gallery/imgcrop/2.1/index"]});
