KISSY.add("gallery/uploader/1.4/themes/ershouUploader/index",function(b,g,d){function a(b){a.superclass.constructor.call(this,b)}b.extend(a,d,{render:function(){this.get("uploader")}},{ATTRS:{name:{value:"ershouUploader"},cssUrl:{value:"gallery/uploader/1.4/themes/ershouUploader/style.css"},fileTpl:{value:'<li id="J_LineQueue-{id}" data-file-id="{id}" data-url="{sUrl}" data-name="{name}" data-size="{textSize}"><div class="J_Wrapper wrapper"><div class="tb-pic120"><a href="javascript:void(0);"><img class="J_ItemPic" src="{sUrl}" /></a></div><div class="pic-mask"></div><div class="status-wrapper"><div class="status waiting-status tips-upload-waiting"><p>\u7b49\u5f85\u4e0a\u4f20\uff0c\u8bf7\u7a0d\u5019</p></div><div class="status start-status progress-status success-status tips-upload-success"><div class="J_ProgressBar_{id}"><s class="loading-icon"></s>\u4e0a\u4f20\u4e2d...</div></div><div class="status error-status"><p class="J_ErrorMsg_{id} tips-upload-error">\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01</p></div></div><div class="upload-op-mask"></div><div class="upload-operations"><a class="J_SetMainPic set-as-main" data-file-id="{id}" href="#">\u8bbe\u4e3a\u4e3b\u56fe</a><a class="J_DeleltePic del-pic" data-file-id="{id}" href="#">\u5220\u9664</a></div></div></li>'},
use:{value:"proBars,filedrop,preview,coverPic"},defaultMsg:{value:"\u6700\u591a\u4e0a\u4f20{max}\u5f20\u7167\u7247\uff0c\u6bcf\u5f20\u56fe\u7247\u5c0f\u4e8e5M"},leftMsg:{value:"\u8fd8\u53ef\u4ee5\u4e0a\u4f20{left}\u5f20\u56fe\u7247\uff0c\u6bcf\u5f20\u5c0f\u4e8e5M\u3002\u4e3b\u56fe\u5c06\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u5c55\u793a\uff0c\u8bf7\u8ba4\u771f\u8bbe\u7f6e\u3002"}}});return a},{requires:["node","gallery/uploader/1.4/themes/imageUploader/index"]});
KISSY.add("gallery/uploader/1.4/themes/ershouUploader/message",function(b,g){function d(a){this.config=b.mix({msgContainer:"#J_MsgBoxUpload",successMsgCls:"msg-success",hintMsgCls:"msg-hint",errorMsgCls:"msg-error"},a);b.log(f+"Constructed")}var a=g.all,f="[ershouUploader: Message] ";b.augment(d,{send:function(c,e){if(!c)return b.log(f+"You did not tell me what to show."),!1;var h=this.config.msgContainer,d=this.config[e+"MsgCls"],g=this.config.successMsgCls,j=this.config.hintMsgCls,k=this.config.errorMsgCls;
if(h)switch(e){case "success":case "hint":case "error":return a(h).html(c),a(h).replaceClass([g,j,k].join(" "),d),!0;default:return b.log(f+"type error"),!1}}});return d},{requires:["node"]});
KISSY.add("gallery/uploader/1.4/themes/ershouUploader/setMainPic",function(b,g){function d(c,e){c=a(c);e=a(e);if(!c||0>=c.length)return b.log(f+"cannot find mainPicInput, SetMainPic function disabled."),!1;if(!e||0>=e.length)return b.log(f+"cannot find queue container"),!1;this.queueContainer=e;this.input=c}var a=g.all,f="[LineQueue: setMainPic] ";b.augment(d,{setMainPic:function(c){var e=a("li",this.queueContainer);b.isString(c)&&b.each(e,function(b){if(a(b).attr("data-url")==c)return c=b,!0});var d=
this.getMainPic(),c=a(c);if(!c||0>=c.length)if(e[0]){if(0<d.length)return b.log(f+"Already have a main pic. Since you do not tell me which one to set as main pic, I will do nothing."),d;b.log(f+"No li element specified. I will set the first pic as main pic.");c=e[0]}else return b.log(f+"There is no pic. I cannot set any pic as main pic. So I will empty the main pic input."),a(this.input).val(""),null;var e=a(".J_Wrapper",c),g=a('<span class="main-pic-logo">\u4e3b\u56fe</span>'),i=a(c).attr("data-url");0<d.length&&
(a(d).removeClass("main-pic"),a(".main-pic-logo",d).remove());a(c).addClass("main-pic");a(g).appendTo(e);a(this.input).val(i);b.log(f+"write main pic url to :"+i);return c},getMainPic:function(){return a(this.queueContainer).children(".main-pic")},getMainPicUrl:function(){return a(this.input).val()}});return d},{requires:["node"]});
