KISSY.add("gallery/uploader/1.4/plugins/ajbridge/ajbridge",function(d,j){function i(c,h,f){var c=c.replace(e,""),h=j._normalize(h||{}),l=this,c=e+c,k=function(c){1>c.status?l.fire("failed",{data:c}):(d.mix(l,c),(!c.dynamic||!h.src)&&l.activate())};h.id=h.id||d.guid(g);i.instances[h.id]=l;h.src&&(h.params.allowscriptaccess="always",h.params.flashvars=d.merge(h.params.flashvars,{jsEntry:a,swfID:h.id}));f?l.__args=[c,h,k]:d.later(j.add,b,!1,j,[c,h,k])}var e="#",g="ks-ajb-",b=100,a="KISSY.AJBridge.eventHandler";
d.mix(i,{version:"1.0.15",instances:{},eventHandler:function(c,a){var b=i.instances[c];b&&b.__eventHandler(c,a)},augment:function(c,a){d.isString(a)&&(a=[a]);d.isArray(a)&&d.each(a,function(a){c.prototype[a]=function(){try{return this.callSWF(a,d.makeArray(arguments))}catch(c){this.fire("error",{message:c})}}})}});d.augment(i,d.EventTarget,{init:function(){this.__args&&(j.add.apply(j,this.__args),this.__args=null,delete this.__args)},__eventHandler:function(c,a){var b=a.type;a.id=c;switch(b){case "log":d.log(a.message);
break;default:this.fire(b,a)}},callSWF:function(a,h){h=h||[];try{if(this.swf[a])return this.swf[a].apply(this.swf,h)}catch(b){var d="";0!==h.length&&(d="'"+h.join("','")+"'");return(new Function("self","return self.swf."+a+"("+d+");"))(this)}}});i.augment(i,["activate","getReady","getCoreVersion"]);return window.AJBridge=d.AJBridge=i},{requires:["gallery/flash/1.0/index"]});
KISSY.add("gallery/uploader/1.4/plugins/ajbridge/uploader",function(d,j,i){function e(g,b){var b=b||{},a={};d.each(["ds","dsp","btn","hand"],function(c){c in b&&(a[c]=b[c])});b.params=b.params||{};b.params.flashvars=d.merge(b.params.flashvars,a);e.superclass.constructor.call(this,g,b)}d.extend(e,i);i.augment(e,"setFileFilters,filter,setAllowMultipleFiles,multifile,browse,upload,uploadAll,cancel,getFile,removeFile,lock,unlock,setBtnMode,useHand,clear".split(","));e.version="1.0.1";i.Uploader=e;return i.Uploader},
{requires:["gallery/flash/1.0/index","./ajbridge"]});
KISSY.add("gallery/uploader/1.4/plugins/auth/auth",function(d,j,i){function e(a){var c=-1;do a/=1024,c++;while(99<a);return Math.max(a,0.1).toFixed(1)+"kB,MB,GB,TB,PB,EB".split(",")[c]}function g(a){g.superclass.constructor.call(this,a)}var b=j.all;d.extend(g,i,{pluginInitializer:function(a){if(!a)return!1;var c=this;c.set("uploader",a);c._useThemeConfig();var b=a.get("queue");c._setSwfButtonExt();b.on("add",function(a){a=a.file;if("restore"==a.type)return!0;var b=c.testAllowExt(a);b&&(b=c.testMaxSize(a));
b&&c.testRepeat(a);b&&c.testWidthHeight(a)});b.on("remove",function(a){"success"==a.file.status&&c.testMax()&&c.testRequired()});a.on("success",function(){c.testMax()});a.on("error",function(b){-1===b.status&&"max"==b.rule&&c._maxStopUpload();a.set("isAllowUpload",!0)})},_useThemeConfig:function(){var a=this.get("msg");if(!d.isEmptyObject(a))return!1;var c=this.get("uploader").get("theme");if(!c)return!1;(a=c.get("authMsg"))&&this.set("msg",a);this.get("allowExts")||this.set("allowExts",c.get("allowExts"));
return this},setAllowExts:function(a){if(!d.isString(a))return!1;var c=[],b=[],a=a.split(",");d.each(a,function(a){c.push("*."+a);b.push(a.toUpperCase())});c=c.join(";");b=b.join(",");return{desc:b,ext:c}},testAll:function(){return this.testRequire()&&this.testMax()},isUploaderType:function(a){var c=this.get("uploader").get("type");return a==c},testRequired:function(){return 0<this.get("uploader").get("queue").getFiles("success").length},testAllowExt:function(a){function c(a){a=a.split(".");return a[a.length-
1]}if(!d.isObject(a))return!1;var b=a.name,f=this.get("allowExts");if(!f)return!0;var l=function(a,c){var b=!1,h=c.toLowerCase(),k;d.each(a,function(a){k=RegExp("^.+."+a+"$");if(k.test(h))return b=!0});return b}(f.split(","),b);if(!l){var b=c(b),k=this.msg("allowExts"),k=d.substitute(k,{ext:b});this._fireUploaderError("allowExts",[f,k],a)}return l},testMax:function(){var a=this.get("max");if(""==a)return!0;var c=this.get("uploader"),b=c.get("queue").getFiles("success").length<a;b?(c.set("disabled",
!1),c.set("isAllowUpload",!0)):(c.set("disabled",!0),c.set("isAllowUpload",!1),c=this.msg("max"),c=d.substitute(c,{max:a}),this._fireUploaderError("max",[a,c]));return b},testMaxSize:function(a){var c=a.size,b=this.get("maxSize");if(""==b||!c)return!0;this.get("uploader");b*=1024;c=c<=b;if(!c){var f=this.msg("maxSize"),f=d.substitute(f,{maxSize:e(b),size:a.textSize});this._fireUploaderError("maxSize",[b,f],a)}return c},testRepeat:function(a){if(!d.isObject(a))return!1;var c=this,b=a.name,f=c.get("allowRepeat");
if(""===f)return!1;var l=c.get("uploader").get("queue").getFiles("success"),k=!1;d.each(l,function(d){if(d.name==b)return d.size?d.size==a.size&&c._fireUploaderError("allowRepeat",[f,c.msg("allowRepeat")],a):c._fireUploaderError("allowRepeat",[f,c.msg("allowRepeat")],a),k=!0});return k},testWidthHeight:function(a){function c(c,b){if(f.call(h,c,b)){l.set("isAllowUpload",!0);var d=l.get("queue").getFileIndex(a.id);l.upload(d)}else d=h.msg("widthHeight"),h._fireUploaderError("widthHeight",[f,d],a)}var h=
this,f=h.get("widthHeight");if(""===f)return!0;var l=h.get("uploader");l.set("isAllowUpload",!1);var k=a.data;if(d.isEmptyObject(k)){k=l.get("target").all("input").getDOMNode();k.select();k.blur();var k=document.selection.createRange().text,e=b('<img style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);width:300px;visibility:hidden;"  />').appendTo("body").getDOMNode();e.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=k;c(e.offsetWidth,e.offsetHeight);
b(e).remove()}else e=new FileReader,e.onload=function(a){var a=a.target.result,b=new Image;b.onload=function(){c(b.width,b.height)};b.src=a},e.readAsDataURL(k)},_setSwfButtonExt:function(){var a=this.get("uploader"),c=this.get("allowExts"),a=a.get("button");if(!this.isUploaderType("flash")||""===c)return!1;c=this.setAllowExts(c);a&&a.set("fileFilters",c[0]);return this},_getExts:function(a){if(!d.isString(a))return!1;var c=a.split(";"),b=[],f=/^\*\./;d.each(c,function(a){a=a.replace(f,"");b.push(a.toUpperCase())});
d.each(b,function(a){c.push(a)});return c},_fireUploaderError:function(a,c,b){var f=this.get("uploader"),e=f.get("queue"),a={status:-1,rule:a},k=-1;b&&(k=e.getFileIndex(b.id),d.mix(a,{file:b,index:k}));c&&d.mix(a,{msg:c[1],value:c[0],result:{}});e.fileStatus(k,"error",a);this.fire("error",a);f.fire("error",a)},_maxStopUpload:function(){var a=this.get("uploader"),c=a.get("queue"),b=this.get("max"),f=a.get("curUploadIndex");if(""==f||f<=b)return!1;b=c.get("files");a.stop();d.each(b,function(a,b){b>=
f&&c.remove(a.id)});a.set("curUploadIndex","")},msg:function(a,c){if(!d.isString(a))return this;var b=this.get("msg");return!d.isString(c)?b[a]:b[a]=c},_processRuleConfig:function(a,c){if(!d.isString(a))return this;d.isArray(c)&&this.msg(a,c[1]);return this}},{ATTRS:{pluginId:{value:"auth"},uploader:{value:""},required:{value:""},max:{value:""},allowExts:{value:""},maxSize:{value:""},allowRepeat:{value:""},widthHeight:{value:""},msg:{value:{}}}});return g},{requires:["node","base"]});
KISSY.add("gallery/uploader/1.4/plugins/coverPic/coverPic",function(d,j,i){function e(){}d.extend(e,i,{pluginInitializer:function(d){if(!d)return!1}},{ATTRS:{pluginId:{value:"coverPic"}}});return e},{requires:["node","base"]});
KISSY.add("gallery/uploader/1.4/plugins/filedrop/filedrop",function(d,j,i){var e=j.all,g=d.UA,b=function(c){b.superclass.constructor.call(this,c);this.set("mode",a())},a=function(){if(7<=g.webkit||3.6<=g.firefox)return"supportDrop";if(g.ie)return"notSupportDropIe";if(7>g.webkit||3.6>g.firefox)return"notSupportDrop"};d.mix(b,{event:{AFTER_DROP:"afterdrop"}});d.extend(b,i,{pluginInitializer:function(a){var b=this,f=b.get("mode");if(!a)return!1;b.set("uploader",a);if("flash"==a.get("type"))return d.log("flash\u4e0a\u4f20\u65b9\u5f0f\u4e0d\u652f\u6301\u62d6\u62fd\uff01"),
b.set("isSupport",!1),!1;if("supportDrop"!=f)return d.log("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u62d6\u62fd\u4e0a\u4f20\uff01"),b.set("isSupport",!1),!1;f=a.get("target");b.set("target",f);b._createDropArea().on("click",b._clickHandler,b);a.on("afterDisabledChange",function(a){b[a.newVal&&"hide"||"show"]()});b.fire("render",{buttonTarget:b.get("buttonWrap")})},show:function(){this.get("dropContainer").show()},hide:function(){this.get("dropContainer").hide()},_createDropArea:function(){var a=this,b=e(a.get("target")),f=a.get("mode"),f=d.substitute(a.get("tpl")[f],
{name:a.get("name")}),f=e(f),g=f.all(".J_ButtonWrap");f.appendTo(b);f.on("dragover",function(a){a.stopPropagation();a.preventDefault()});f.on("drop",function(b){b.stopPropagation();b.preventDefault();a._dropHandler(b)});a.set("dropContainer",f);a.set("buttonWrap",g);a._setStyle();return f},_setStyle:function(){var a=this.get("dropContainer");if(!a.length)return!1;a.parent().css("position","relative");a.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1000"})},_clickHandler:function(){this.get("uploader").get("button").get("fileInput").fire("click")},
_dropHandler:function(a){var h=b.event,a=a.originalEvent.dataTransfer.files,f=[],e=this.get("uploader");if(!a.length||""==e)return!1;d.each(a,function(a){d.isObject(a)&&f.push({name:a.name,type:a.type,size:a.size,data:a})});this.fire(h.AFTER_DROP,{files:f});e._select({files:f})}},{ATTRS:{pluginId:{value:"filedrop"},target:{value:"",getter:function(a){return e(a)}},uploader:{value:""},dropContainer:{value:""},isSupport:{value:!0},tpl:{value:{supportDrop:'<div class="drop-wrapper"></div>',notSupportDropIe:'<div class="drop-wrapper"><p>\u60a8\u7684\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u4f20\u7edf\u7684\u56fe\u7247\u4e0a\u4f20\uff0c</p><p class="suggest J_ButtonWrap">\u63a8\u8350\u4f7f\u7528chrome\u6d4f\u89c8\u5668\u6216firefox\u6d4f\u89c8\u5668</p></div>',
notSupportDrop:'<div class="drop-wrapper"><p>\u60a8\u7684\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u4f20\u7edf\u7684\u56fe\u7247\u4e0a\u4f20\uff0c</p><p class="suggest J_ButtonWrap">\u63a8\u8350\u5347\u7ea7\u60a8\u7684\u6d4f\u89c8\u5668</p></div>'}},name:{value:""}}});return b},{requires:["node","base"]});
KISSY.add("gallery/uploader/1.4/plugins/imageZoom/imageZoom",function(d,j,i,e){function g(a){g.superclass.constructor.call(this,a)}var b=j.all;d.extend(g,i,{pluginInitializer:function(a){if(!a)return!1;a.on("success",this._successHandler,this)},_successHandler:function(a){var a=a.file,c=a.result.url,d=b(".J_Pic_"+a.id);d.attr("data-original-url",c);d.addClass("J_ImgDD");this._renderIMGDD(a.target)},_renderIMGDD:function(a){if(!a||!a.length)return!1;(new e).add(a,".J_ImgDD")}},{ATTRS:{pluginId:{value:"imageZoom"}}});
return g},{requires:["node","base","gallery/image-dd/1.0/index"]});
KISSY.add("gallery/uploader/1.4/plugins/imgcrop/imgcrop",function(d,j,i,e){function g(a){g.superclass.constructor.call(this,a);this.set("config",a)}var b=j.all;d.extend(g,i,{pluginInitializer:function(a){if(!a)return!1;var b=this,d=b.get("config"),d=new e(d);b.set("crop",d);a.on("success",b._successHandler,b);a.on("select",b._selectHandler,b);d.on("imgload",function(){b.set("isRender",!0)})},_successHandler:function(a){var c=this.get("crop"),d=a.file.id;c.set("url",a.result.url);a=".J_CropArea_"+
d;d=b(a);if(!d.length)return!1;c.set("areaEl",a);c.container=d;c.set("areaWidth",d.width());c.set("areaHeight",d.height());c.render()},_selectHandler:function(){var a=this.get("isRender"),b=this.get("crop");if(!a)return!1;b.destroy()}},{ATTRS:{pluginId:{value:"imgcrop"},isRender:{value:!1},config:{value:{}}}});return g},{requires:["node","base","gallery/imgcrop/2.1/index"]});
KISSY.add("gallery/uploader/1.4/plugins/plugins",function(d,j,i,e,g,b,a,c,h){return{Auth:j,Filedrop:i,ImageZoom:e,Imgcrop:g,Preview:b,ProBars:a,TagConfig:c,UrlsInput:h}},{requires:"./auth/auth,./filedrop/filedrop,./imageZoom/imageZoom,./imgcrop/imgcrop,./preview/preview,./proBars/proBars,./tagConfig/tagConfig,./urlsInput/urlsInput".split(",")});
KISSY.add("gallery/uploader/1.4/plugins/preview/preview",function(d,j,i,e,g){function b(a,b){if(!a)return!1;if("filter"!=f)a.src=b||l;else if(b){b=b.replace(/[)'"%]/g,function(a){return escape(escape(a))});try{a.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=b}catch(c){}}return!0}function a(b){this.config=d.mix({maxWidth:40,maxHeight:40},b);a.superclass.constructor.call(this,b)}var c=j.all,h=document,f=function(){var a="";if("undefined"===typeof window.FileReader)switch(d.UA.shell){case "firefox":a=
"domfile";break;case "ie":switch(d.UA.ie){case 6:a="simple";break;default:a="filter"}}else a="html5";return a}(),l=8>d.UA.ie?"http://a.tbcdn.cn/p/fp/2011a/assets/space.gif":"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";d.extend(a,g,{pluginInitializer:function(a){if(!a)return!1;this.set("uploader",a);a.on("add",this._uploaderAddHandler,this)},_uploaderAddHandler:function(a){var b=this.get("uploader");if(b.get("hasRestore"))return!1;var f=b.get("fileInput"),e=
a.file,a=e.data,e=e.id,h=this.get("preHook"),g=c(h+e);if(!g.length)return d.log("\u94a9\u5b50\u4e3a\uff1a"+h+e+"\uff0c\u627e\u4e0d\u5230\u56fe\u7247\u5143\u7d20\uff0c\u65e0\u6cd5\u9884\u89c8\u56fe\u7247"),!1;b.get("multiple")&&"ajax"==b.get("type")?this.show(a,g,function(){g.show()}):(this.preview(f,g),g.show())},show:function(a,b,c){if(!a||!b||!b.length)return!1;var e=this,h=new FileReader;h.onload=function(a){a=e.data=a.target.result;e.fire(void 0,{data:a,mode:f});b.attr("src",a);c&&c.call(e,a);e.fire("showed",{img:a})};h.onerror=function(){d.log("[Plugin: Preview] File Reader Error. Your browser may not fully support html5 file api",
"warning");e.fire("error")};h.readAsDataURL(a)},preview:function(a,c){var a=i.get(a),c=i.get(c),e=this,g=function(){e.fire(void 0,{data:e.data,mode:f});c&&(b(c,e.data),e.fire("showed",{img:c}))};e.data=void 0;if(a){d.log("[Plugin: Preview] One file selected. Getting data...");switch(f){case "domfile":e.data=a.files[0].getAsDataURL();break;case "filter":a.select();a.blur();try{e.data=h.selection.createRange().text}catch(l){d.log("[Plugin: Preview] Get image data error, the error is: "),d.log(l,"dir")}finally{h.selection.empty()}e.data||
(e.data=a.value);break;case "html5":var j=new FileReader;j.onload=function(a){e.data=a.target.result;g()};j.onerror=function(){d.log("[Plugin: Preview] File Reader Error. Your browser may not fully support html5 file api","warning");e.fire("error")};a.files&&j.readAsDataURL(a.files[0]);break;default:e.data=a.value}e.data?g():"html5"!=f&&(d.log("[Plugin: Preview] Retrive Data error."),b(c),e.fire("error"))}else d.log("[Plugin: Preview] File Input Element does not exists.");return e.data}},{ATTRS:{pluginId:{value:"preview"},
uploader:{value:""},preHook:{value:".J_Pic_"}}});return a},{requires:["node","dom","event","base"]});
KISSY.add("gallery/uploader/1.4/plugins/proBars/proBars",function(d,j,i,e){function g(a){g.superclass.constructor.call(this,a)}var b=j.all;d.mix(g,{event:{RENDER:"render"}});d.extend(g,i,{pluginInitializer:function(a){if(!a)return!1;var b=this;a.get("type");a.on("start",function(a){b.add(a.file.id)});a.on("progress",b._uploaderProgressHandler,b);a.on("success",b._uploaderSuccessHandler,b);b.fire(g.event.RENDER)},_uploaderProgressHandler:function(a){var b=a.file.id,a=Math.ceil(100*(a.loaded/a.total));
(b=this.get("bars")[b])&&b.set("value",a)},_uploaderSuccessHandler:function(a){var c=a.file.id,c=this.get("bars")[c],e=this.get("isHide");c&&c.set("value",100);e&&d.later(function(){b(".J_ProgressBar_"+a.file.id).hide()},500)},add:function(a){if(!d.isString(a))return!1;var c=b(".J_ProgressBar_"+a),h=b(".J_ProgressCount_"+a),f=this.get("speed"),c=new e(c,{width:this.get("width"),speed:f});if(h.length)c.on("change",function(a){h.text(a.value+"%")});c.render();return this.get("bars")[a]=c}},{ATTRS:{pluginId:{value:"proBars"},
bars:{value:{}},width:{value:"auto"},isHide:{value:!0},speed:{value:0.2}}});return g},{requires:["node","base","gallery/uploader/1.4/plugins/proBars/progressBar"]});
KISSY.add("gallery/uploader/1.4/plugins/proBars/progressBar",function(d,j,i){function e(b,a){a=d.merge({wrapper:g(b)},a);e.superclass.constructor.call(this,a)}var g=j.all;d.mix(e,{tpl:{DEFAULT:'<div class="ks-progress-bar-value" data-value="{value}"></div>'},cls:{PROGRESS_BAR:"ks-progress-bar",VALUE:"ks-progress-bar-value"},event:{RENDER:"render",CHANGE:"change",SHOW:"show",HIDE:"hide"}});d.extend(e,i,{render:function(){var b=this.get("wrapper"),a=this.get("width");if(!b.length)return!1;"auto"==a&&
(a=b.parent().width());b.width(a);b.addClass(e.cls.PROGRESS_BAR);this._addAttr();!this.get("visible")&&this.hide();this.set("bar",this._create());this.fire(e.event.RENDER)},show:function(){var b=this;b.get("wrapper").fadeIn(b.get("duration"),function(){b.set("visible",!0);b.fire(e.event.SHOW,{visible:!0})})},hide:function(){var b=this;b.get("wrapper").fadeOut(b.get("duration"),function(){b.set("visible",!1);b.fire(e.event.HIDE,{visible:!1})})},_create:function(){var b=this.get("wrapper"),a=this.get("value"),
c=this.get("tpl"),a=d.substitute(c,{value:a});b.html("");return g(a).appendTo(b)},_addAttr:function(){var b=this.get("wrapper"),a=this.get("value");b.attr("role","progressbar");b.attr("aria-valuemin",0);b.attr("aria-valuemax",100);b.attr("aria-valuenow",a);return this}},{ATTRS:{wrapper:{value:""},bar:{value:""},width:{value:"auto"},value:{value:0,setter:function(b){var a=this,c=a.get("wrapper"),d=a.get("bar"),f=a.get("speed"),g;100<b&&(b=100);0>b&&(b=0);g=c.width()*(b/100);d.animate({width:g+"px"},
f,"none",function(){c.attr("aria-valuenow",b);d.attr("data-value",b);a.fire(e.event.CHANGE,{value:b,width:g})});return b}},visible:{value:!0},duration:{value:0.3},tpl:{value:e.tpl.DEFAULT},speed:{value:0.2}}});return e},{requires:["node","base"]});
KISSY.add("gallery/uploader/1.4/plugins/tagConfig/tagConfig",function(d,j,i){function e(a){e.superclass.constructor.call(this,a)}var g="autoUpload,postData,action,multiple,multipleLen,uploadType,disabled".split(","),b="max,maxSize,allowRepeat,allowExts,required,widthHeight".split(",");d.extend(e,i,{pluginInitializer:function(a){if(!a)return!1;var b=a.get("_oldInput");if(!b)return!1;this.set("uploader",a);this.set("input",b);this.cover()},cover:function(){this._setUploaderConfig();this._setAuthConfig();
return this},_setUploaderConfig:function(){var a=this.get("input"),b,e=this.get("uploader");d.each(g,function(f){if(b=a.attr(f)){switch(f){case "postData":f="data";b=d.JSON.parse(b);break;case "uploadType":f="type";break;case "autoUpload":b="true"==b}e.set(f,b)}})},_setAuthConfig:function(){var a=this.get("input"),c=this.get("uploader").getPlugin("auth");if(!c)return!1;var e,f;d.each(b,function(b){if(e=a.attr(b)){switch(b){case "allowRepeat":e="true"==e;break;case "maxSize":e=Number(e)}c.set(b,e)}(f=
a.attr(b+"-msg"))&&c.msg(b,f)})}},{ATTRS:{pluginId:{value:"tagConfig"},input:{value:""}}});return e},{requires:["node","base"]});
KISSY.add("gallery/uploader/1.4/plugins/urlsInput/urlsInput",function(d,j,i){function e(b){e.superclass.constructor.call(this,b)}var g=j.all;d.extend(e,i,{pluginInitializer:function(b){if(!b)return!1;this.set("uploader",b);b.on("success",this._uploadSuccessHandler,this);b.get("queue").on("remove",this._fileRemoveHandler,this)},_uploadSuccessHandler:function(b){b=b.result;if(!d.isObject(b))return!1;var a=b.url;this.get("useName")&&(a=b.name);this.add(a);return this},_fileRemoveHandler:function(b){(b=
b.file.result)&&b.url&&this.remove(b.url)},add:function(b){if(!d.isString(b))return d.log("[uploader-urlsInput]:add()\u7684url\u53c2\u6570\u4e0d\u5408\u6cd5\uff01"),!1;var a=this.get("urls"),c=this.isExist(b);""==a[0]&&(a=[]);if(c)return d.log("[uploader-urlsInput]:add()\uff0c\u6587\u4ef6\u8def\u5f84\u5df2\u7ecf\u5b58\u5728\uff01"),this;a.push(b);this.set("urls",a);this._val();return this},remove:function(b){if(!b)return!1;var a=this.get("urls"),c=this.isExist(b),e=RegExp(b);if(!c)return d.log("[uploader-urlsInput]:remove()\uff0c\u4e0d\u5b58\u5728\u8be5\u6587\u4ef6\u8def\u5f84\uff01"),!1;a=d.filter(a,function(a){return!e.test(a)});
this.set("urls",a);this._val();return a},parse:function(){var b=this.get("target");if(b){var b=g(b).val(),a=this.get("split");if(""==b)return[];b=b.split(a);this.set("urls",b);return b}d.log("[uploader-urlsInput]:cannot find urls input.");return[]},_val:function(){var b=this.get("urls"),a=this.get("target"),c=this.get("split"),b=b.join(c);a.val(b);return b},isExist:function(b){var a=!1,c=this.get("urls"),e=RegExp(b);if(!c.length)return!1;d.each(c,function(b){if(e.test(b))return a=!0});return a}},
{ATTRS:{pluginId:{value:"urlsInput"},uploader:{value:""},urls:{value:[]},split:{value:",",setter:function(b){this._val();return b}},target:{value:"",getter:function(b){return g(b)}},useName:{value:!1}}});return e},{requires:["node","base"]});
