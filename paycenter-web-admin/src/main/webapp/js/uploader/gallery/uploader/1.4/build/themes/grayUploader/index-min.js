KISSY.add(function(g,h,i){function e(a){e.superclass.constructor.call(this,a)}var f=h.all;g.extend(e,i,{render:function(){e.superclass.render.call(this)},_addHandler:function(a){var c=this,b=a.file,a=b.id,d=b.target,e=f(".J_ActionBar_"+a);d.on("mouseenter mouseleave",function(a){"mouseenter"==a.type?(e.slideDown(0.3),c._setDisplayMsg(!0,b)):(e.slideUp(0.3),c._setDisplayMsg(!1,b))});d=f(".J_Del_"+a);d.data("data-file",b);d.on("click",c._delHandler,c);f(".J_Zoom_"+a).on("click",function(){});f(".J_Pic_"+
a).show()},_errorHandler:function(a){var c=this,b=a.file;g.log(a.msg);if(!b)return!1;var d=b.id;f(".J_ErrorMsg_"+d).html("\u4e0a\u4f20\u5931\u8d25");g.later(function(){c.get("uploader").get("queue").remove(d)},1E3)},_successHandler:function(a){var c=a.file,b=c.id,d=c.result;this._setCount();d&&this._changeImageSrc(a);f(".J_Mask_"+b).hide();if(!this.get("uploader").getPlugin("proBars")){a=c.target;if(!a)return!1;a.all(".J_ProgressBar_"+b).hide()}},_setDisplayMsg:function(a,c){if(!c)return!1;var b=f(".J_Mask_"+c.id);if(b.parent("li")&&
b.parent("li").hasClass("error"))return!1;b[a&&"fadeIn"||"fadeOut"](0.3)}},{ATTRS:{name:{value:"grayUploader"},fileTpl:{value:'<li id="queue-file-{id}" class="g-u" data-name="{name}"><div class="pic-wrapper"><div class="pic"><span><img class="J_Pic_{id} preview-img" src="" /></span></div><div class=" J_Mask_{id} pic-mask"></div><div class="status-wrapper J_FileStatus"><div class="status waiting-status"><p>\u7b49\u5f85\u4e0a\u4f20</p></div><div class="status start-status progress-status success-status"><div class="J_ProgressBar_{id}">\u4e0a\u4f20\u4e2d...</div></div><div class="status error-status"><p class="J_ErrorMsg_{id}">\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01</p></div></div></div><div class="action-bar J_ActionBar_{id} grid"><a class="g-u J_Del_{id}" href="#nowhere" title="\u5220\u9664"><span class="icon del-icon">\u5220\u9664</span></a><a class="g-u J_Zoom_{id}" data-id="{id}" href="#nowhere" title="\u653e\u5927"><span class="icon zoom-icon">\u653e\u5927</span></a></div></li>'}}});
return e},{requires:["node","gallery/uploader/1.4/themes/imageUploader/index"]});
