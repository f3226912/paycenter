KISSY.add("gallery/uploader/1.4/plugins/proBars/proBars",function(d,e,g,h){function c(a){c.superclass.constructor.call(this,a)}var f=e.all;d.mix(c,{event:{RENDER:"render"}});d.extend(c,g,{pluginInitializer:function(a){if(!a)return!1;var b=this;a.get("type");a.on("start",function(a){b.add(a.file.id)});a.on("progress",b._uploaderProgressHandler,b);a.on("success",b._uploaderSuccessHandler,b);b.fire(c.event.RENDER)},_uploaderProgressHandler:function(a){var b=a.file.id,a=Math.ceil(100*(a.loaded/a.total));
(b=this.get("bars")[b])&&b.set("value",a)},_uploaderSuccessHandler:function(a){var b=a.file.id,b=this.get("bars")[b],c=this.get("isHide");b&&b.set("value",100);c&&d.later(function(){f(".J_ProgressBar_"+a.file.id).hide()},500)},add:function(a){if(!d.isString(a))return!1;var b=f(".J_ProgressBar_"+a),c=f(".J_ProgressCount_"+a),e=this.get("speed"),b=new h(b,{width:this.get("width"),speed:e});if(c.length)b.on("change",function(a){c.text(a.value+"%")});b.render();return this.get("bars")[a]=b}},{ATTRS:{pluginId:{value:"proBars"},
bars:{value:{}},width:{value:"auto"},isHide:{value:!0},speed:{value:0.2}}});return c},{requires:["node","base","gallery/uploader/1.4/plugins/proBars/progressBar"]});
